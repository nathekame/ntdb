{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/home/noa/ntdbProject/app/NTDB/components/profile/bioInformation.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport moment from 'moment';\nimport Cookie from 'js-cookie';\nimport { ProfileContext } from '../../../store/contexts/profileContext';\nimport jwtFuncs from '../../../utility/jwt';\nimport localStorageFuncs from '../../../utility/localStorage';\nimport logout from '../../../utility/logout';\nimport Navbar from '../../layouts/navbar';\nimport '../../../public/assets/style.scss';\nimport Logout from '../../../utility/logout';\nimport checkInLocalStorage from '../../utility/persistLocalToState';\nimport axiosFuncs from '../../../utility/axios';\nimport Validator from 'validatorjs'; //   const cropper = React.createRef(null);\n//  const buttonStyle = {\n//   backgroundColor: 'blue',\n//  // backgroundImage: 'url(' + imgUrl + ')',\n// };\n\nvar PersonalDetails = function PersonalDetails(props) {\n  // console.log(\"this is the passed in props +\"+JSON.stringify(props));\n  //const localCookie = Cookie.get('auth'); \n  //console.log(\"this is the local cookie from Bio Information       nnnnnn    ----->>>>>>>>>>>>> \"+localCookie);\n  var _useContext = useContext(ProfileContext),\n      dispatch = _useContext.dispatch;\n\n  var currentProfile = useContext(ProfileContext);\n  var profileValue = currentProfile.profile.personalDetails;\n\n  var profileDetails = function profileDetails(val) {\n    if (val === undefined) {\n      return;\n    } else {\n      return val;\n    }\n  };\n\n  console.log(\"this is the current contect =============>>>>>>>>>>> \" + JSON.stringify(currentProfile)); // console.log(\"this is the current contect =============>>>>>>>>>>> \"+currentProfile.profile.personalDetails.firstName);\n  // const checkInLocalStorage = (val) => {\n  //   const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n  //   const localStorageValue = getLocalItem.personalDetails[val]\n  //   if(localStorageValue !== undefined){\n  //   //  console.log(\"there is a value   -->>\"+localValue);\n  //     return localStorageValue\n  //   }else{\n  //     return ''\n  //   }\n  // }\n\n  var _useState = useState({\n    //  nextProfileStep: 2,\n    profileStep: 1,\n    firstName: checkInLocalStorage(\"personalDetails\", \"firstName\"),\n    middleName: checkInLocalStorage(\"personalDetails\", \"middleName\"),\n    lastName: checkInLocalStorage(\"personalDetails\", \"lastName\"),\n    gender: checkInLocalStorage(\"personalDetails\", \"gender\"),\n    dob: checkInLocalStorage(\"personalDetails\", \"dob\"),\n    placeOfBirthTown: checkInLocalStorage(\"personalDetails\", \"placeOfBirthTown\"),\n    stateOfOrigin: checkInLocalStorage(\"personalDetails\", \"stateOfOrigin\"),\n    lgaOfOrigin: checkInLocalStorage(\"personalDetails\", \"lgaOfOrigin\")\n  }),\n      personalDetails = _useState[0],\n      setPersonalDetails = _useState[1];\n\n  var _useState2 = useState(true),\n      buttonState = _useState2[0],\n      setButtonState = _useState2[1];\n\n  var rules = {\n    firstName: 'required',\n    // middleName: 'required|email',\n    lastName: 'required',\n    gender: 'required',\n    dob: 'required',\n    placeOfBirthTown: 'required',\n    stateOfOrigin: 'required',\n    lgaOfOrigin: 'required' //  email: 'required|email',\n    //  age: 'min:18'\n\n  };\n  var validation = new Validator(personalDetails, rules, {\n    required: 'required*'\n  });\n  validation.fails(); // true\n\n  validation.passes(); // false\n  // if (validation.fails()) {\n  //   console.log(\"the validation has failed thats why u see this \"+validation.errors.get(\"firstNameame\"));\n  //   // Error messages\n  // validation.errors.first('email'); // 'The email format is invalid.'\n  // validation.errors.get('email');\n  // }\n\n  useEffect(function () {\n    if (validation.passes()) {\n      setButtonState(false); // console.log(\"the   buttonStete \"+buttonState);  \n    } else {\n      setButtonState(true);\n    }\n  }, [personalDetails]);\n\n  var handleDateChange = function handleDateChange(date) {\n    //setSelectedDate(date);\n    setPersonalDetails(_objectSpread({}, personalDetails, {\n      dob: moment(date).format('YYYY-MM-DD')\n    }));\n  };\n\n  var handleChange = function handleChange(e) {\n    e.preventDefault();\n    setPersonalDetails(_objectSpread({}, personalDetails, _defineProperty({}, e.target.id, e.target.value)));\n  };\n\n  var handleForward = function handleForward(e) {\n    var next, go;\n    return _regeneratorRuntime.async(function handleForward$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n\n            if (!validation.passes()) {\n              _context.next = 10;\n              break;\n            }\n\n            dispatch({\n              type: 'ADD_PROFILE_DATA',\n              payload: {\n                personalDetails: personalDetails\n              }\n            });\n            next = \"F\";\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(props.updatestep(next));\n\n          case 6:\n            go = _context.sent;\n            dispatch({\n              type: 'CURRENT_STEP',\n              payload: personalDetails.profileStep + 1\n            });\n\n            if (!go) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\", go);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleSaveNow = function handleSaveNow(e) {\n    var data, api;\n    return _regeneratorRuntime.async(function handleSaveNow$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault(); // setPersonalDetails({ ...personalDetails, profileStep: personalDetails.profileStep+1 });\n\n            data = _objectSpread({}, personalDetails, {\n              profileStep: personalDetails.profileStep + 1\n            });\n            console.log(\"the data  \" + JSON.stringify(personalDetails));\n\n            if (!validation.passes()) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(axiosFuncs.profilePost(data));\n\n          case 6:\n            api = _context2.sent;\n\n            if (api.data === \"error\") {\n              console.log(\"the log is error\");\n            }\n\n            if (api.data === \"success\") {\n              console.log(\"the log is success\" + api.status); // router.push('/account')\n            }\n\n            dispatch({\n              type: 'CLEAR_CONTEXT'\n            });\n            Logout();\n            _context2.next = 15;\n            break;\n\n          case 13:\n            dispatch({\n              type: 'CLEAR_CONTEXT'\n            });\n            Logout();\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var persistToLocalStorage = function persistToLocalStorage() {\n    var getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n\n    if (getLocalItem !== undefined) {} else {\n      // console.log(\"i=the local storage is empty make i put something insidehinixdopd\")\n      //  const newData = {...getLocalItem, personalDetails };\n      var setLocalItem = localStorageFuncs.setItemInStorage(\"profile\", personalDetails);\n      return setLocalItem;\n    }\n  };\n\n  useEffect(function () {\n    // set local storage\n    //console.log(\"this is the use effect running up and downnnnnnn   nooooooooooooowwwwwwwwwwww\")\n    // dispatch({type: 'CLEAR_DATA'});\n    persistToLocalStorage(); // persistToState();\n    // checkLocalStorage(\"firstName\");\n  });\n  return __jsx(\"div\", {\n    className: \"pagegrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 5\n    }\n  }, __jsx(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"innergrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"profile-form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 19\n    }\n  }, \"Bio Information    1\"), __jsx(\"div\", {\n    className: \"three-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"firstName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 27\n    }\n  }, \"First Name  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 66\n    }\n  }, validation.errors.get(\"firstName\"))), __jsx(\"input\", {\n    className: \"firstName\",\n    id: \"firstName\",\n    onChange: handleChange,\n    value: personalDetails.firstName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"middleName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 27\n    }\n  }, \"Other Name \"), __jsx(\"input\", {\n    id: \"middleName\",\n    onChange: handleChange,\n    value: personalDetails.middleName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"lastName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 27\n    }\n  }, \"Last Name  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 64\n    }\n  }, validation.errors.get(\"lastName\"))), __jsx(\"input\", {\n    id: \"lastName\",\n    onChange: handleChange,\n    value: personalDetails.lastName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 27\n    }\n  }))), __jsx(\"div\", {\n    className: \"three-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"gender\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 27\n    }\n  }, \"Gender  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 59\n    }\n  }, validation.errors.get(\"gender\"))), __jsx(\"select\", {\n    id: \"gender\",\n    onChange: handleChange,\n    value: personalDetails.gender,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 27\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 31\n    }\n  }), __jsx(\"option\", {\n    value: \"Male\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 31\n    }\n  }, \"Male\"), __jsx(\"option\", {\n    value: \"Female\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 31\n    }\n  }, \"Female\"))), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"dob\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 27\n    }\n  }, \"Date Of Birth  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 63\n    }\n  }, validation.errors.get(\"dob\"))), __jsx(\"input\", {\n    id: \"dob\",\n    type: \"date\",\n    onChange: handleDateChange,\n    value: personalDetails.dob,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"placeOfBirthTown\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 27\n    }\n  }, \"Place Of Birth  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 77\n    }\n  }, validation.errors.get(\"placeOfBirthTown\"))), __jsx(\"input\", {\n    id: \"placeOfBirthTown\",\n    onChange: handleChange,\n    value: personalDetails.placeOfBirthTown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 27\n    }\n  }))), __jsx(\"div\", {\n    className: \"two-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    onClick: handleSaveNow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 26\n    }\n  }, \"Save And Logout\")), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    disabled: buttonState,\n    onClick: handleForward,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 26\n    }\n  }, \"Next\"))))));\n};\n\nexport default PersonalDetails;","map":{"version":3,"sources":["/home/noa/ntdbProject/app/NTDB/components/profile/bioInformation.js"],"names":["React","useState","useEffect","useContext","moment","Cookie","ProfileContext","jwtFuncs","localStorageFuncs","logout","Navbar","Logout","checkInLocalStorage","axiosFuncs","Validator","PersonalDetails","props","dispatch","currentProfile","profileValue","profile","personalDetails","profileDetails","val","undefined","console","log","JSON","stringify","profileStep","firstName","middleName","lastName","gender","dob","placeOfBirthTown","stateOfOrigin","lgaOfOrigin","setPersonalDetails","buttonState","setButtonState","rules","validation","required","fails","passes","handleDateChange","date","format","handleChange","e","preventDefault","target","id","value","handleForward","type","payload","next","updatestep","go","handleSaveNow","data","profilePost","api","status","persistToLocalStorage","getLocalItem","getItemFromStorage","setLocalItem","setItemInStorage","errors","get"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useContext } from 'react'\n\nimport moment from 'moment'\n\n\nimport Cookie from 'js-cookie'\n\nimport { ProfileContext } from '../../../store/contexts/profileContext'\nimport jwtFuncs from '../../../utility/jwt'\n\nimport localStorageFuncs from '../../../utility/localStorage'\nimport logout from '../../../utility/logout';\n\nimport Navbar from '../../layouts/navbar'\n\nimport '../../../public/assets/style.scss';\nimport Logout from '../../../utility/logout'\nimport checkInLocalStorage from '../../utility/persistLocalToState'\nimport axiosFuncs from '../../../utility/axios'\n\nimport Validator from 'validatorjs';\n\n\n //   const cropper = React.createRef(null);\n\n//  const buttonStyle = {\n//   backgroundColor: 'blue',\n//  // backgroundImage: 'url(' + imgUrl + ')',\n// };\n\n\n\n\nconst PersonalDetails = (props) => {\n\n // console.log(\"this is the passed in props +\"+JSON.stringify(props));\n\n\n  //const localCookie = Cookie.get('auth'); \n\n  //console.log(\"this is the local cookie from Bio Information       nnnnnn    ----->>>>>>>>>>>>> \"+localCookie);\n\n\n  const { dispatch } = useContext(ProfileContext);\n\n  const currentProfile = useContext(ProfileContext);\n\n  const profileValue = currentProfile.profile.personalDetails;\n\n  const profileDetails = (val) => {\n\n      if(val === undefined){\n          return\n      }else{\n        return val\n      }\n    }\n\n  console.log(\"this is the current contect =============>>>>>>>>>>> \"+JSON.stringify(currentProfile));\n\n // console.log(\"this is the current contect =============>>>>>>>>>>> \"+currentProfile.profile.personalDetails.firstName);\n\n// const checkInLocalStorage = (val) => {\n\n//   const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n//   const localStorageValue = getLocalItem.personalDetails[val]\n\n//   if(localStorageValue !== undefined){\n//   //  console.log(\"there is a value   -->>\"+localValue);\n//     return localStorageValue\n//   }else{\n//     return ''\n//   }\n// }\n\n\n  const [personalDetails, setPersonalDetails] = useState(\n          {\n          //  nextProfileStep: 2,\n            profileStep:1,\n            firstName: checkInLocalStorage(\"personalDetails\",\"firstName\"),\n            middleName: checkInLocalStorage(\"personalDetails\",\"middleName\"),\n            lastName: checkInLocalStorage(\"personalDetails\",\"lastName\"),\n            gender: checkInLocalStorage(\"personalDetails\",\"gender\"),\n            dob :  checkInLocalStorage(\"personalDetails\",\"dob\"),\n            placeOfBirthTown: checkInLocalStorage(\"personalDetails\",\"placeOfBirthTown\"),\n            stateOfOrigin: checkInLocalStorage(\"personalDetails\",\"stateOfOrigin\"),\n            lgaOfOrigin: checkInLocalStorage(\"personalDetails\",\"lgaOfOrigin\")\n          \n          }\n);\n\nconst [buttonState, setButtonState] = useState(true);\n\n                 \nlet rules = {\n\n  firstName: 'required',\n  // middleName: 'required|email',\n  lastName: 'required',\n  gender: 'required',\n  dob :  'required',\n  placeOfBirthTown: 'required',\n  stateOfOrigin: 'required',\n  lgaOfOrigin: 'required'\n\n//  email: 'required|email',\n//  age: 'min:18'\n};\n \nlet validation = new Validator(personalDetails, rules, { required: 'required*' });\n\nvalidation.fails(); // true\nvalidation.passes(); // false\n \n\n// if (validation.fails()) {\n//   console.log(\"the validation has failed thats why u see this \"+validation.errors.get(\"firstNameame\"));\n\n//   // Error messages\n// validation.errors.first('email'); // 'The email format is invalid.'\n// validation.errors.get('email');\n\n// }\n\n\n\nuseEffect(() => {\n\n\n    if (validation.passes()) {\n      setButtonState(false);\n     // console.log(\"the   buttonStete \"+buttonState);  \n    }else{\n      setButtonState(true);\n\n    }\n},[personalDetails]);\n\n\n\n\n\n\n const handleDateChange = date => {\n    //setSelectedDate(date);\n    setPersonalDetails({ ...personalDetails, dob: moment(date).format('YYYY-MM-DD') })\n\n  };\n\n  const  handleChange =(e) => {\n    e.preventDefault(); \n    setPersonalDetails({ ...personalDetails, [e.target.id]: e.target.value })\n\n  }\n\n const handleForward = async e => {\n\n    e.preventDefault();\n\n    if (validation.passes()) {    \n      dispatch({type: 'ADD_PROFILE_DATA', payload: {personalDetails: personalDetails}}); \n      const next = \"F\";\n      const go = await props.updatestep(next);\n      dispatch({type: 'CURRENT_STEP', payload: personalDetails.profileStep+1});\n      if(go){     \n      //  console.log(\"all has gone well with the profile update from the props--->>>> \"+props.currentStep);\n        return go\n      }\n      \n    }\n\n  \n\n\n}\n\n\nconst handleSaveNow = async e => {\n\n  e.preventDefault();\n\n // setPersonalDetails({ ...personalDetails, profileStep: personalDetails.profileStep+1 });\n\n  const data =  {...personalDetails,  profileStep: personalDetails.profileStep+1};\n\n  console.log(\"the data  \"+ JSON.stringify(personalDetails));\n\n  if (validation.passes()) {  \n      let api = await axiosFuncs.profilePost(data);\n      if(api.data === \"error\" ){\n        console.log(\"the log is error\");\n      }\n      if (api.data === \"success\") {\n        console.log(\"the log is success\"+api.status);\n        // router.push('/account')\n      }\n      dispatch({type: 'CLEAR_CONTEXT'});\n      Logout();\n\n  }else{\n    dispatch({type: 'CLEAR_CONTEXT'});\n    Logout();\n  }\n \n\n\n  \n\n // props.createProfile(props.stateData);\n \n\n//  logout();\n\n}\n\n\n\n\nconst persistToLocalStorage = () => {\n\n  const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n\n  if(getLocalItem !== undefined){\n\n \n\n  }else{\n\n   // console.log(\"i=the local storage is empty make i put something insidehinixdopd\")\n  //  const newData = {...getLocalItem, personalDetails };\n    const setLocalItem = localStorageFuncs.setItemInStorage(\"profile\", personalDetails);\n\n    return setLocalItem;\n\n  }\n\n}\n\n\n\n\nuseEffect(() => {\n  // set local storage\n\n  //console.log(\"this is the use effect running up and downnnnnnn   nooooooooooooowwwwwwwwwwww\")\n // dispatch({type: 'CLEAR_DATA'});\n\n  persistToLocalStorage();\n  // persistToState();\n  // checkLocalStorage(\"firstName\");\n})\n\n\n\n  return (\n\n    <div className=\"pagegrid\">\n      <Navbar />\n\n        <div className=\"innergrid\">\n\n            <div className=\"profile-form\" >\n\n                  <h3>Bio Information    1</h3>\n\n                  <div className=\"three-column-row\">\n                    \n                        <div className=\"column\">\n                        \n                          <label htmlFor=\"firstName\">First Name  <span className=\"fieldError\">{validation.errors.get(\"firstName\")}</span></label> \n                          <input className=\"firstName\" id=\"firstName\" onChange={handleChange}  value={personalDetails.firstName} />\n                \n                        </div> \n                        <div className=\"column\">\n                          <label htmlFor=\"middleName\">Other Name </label>\n                          <input id=\"middleName\" onChange={handleChange} value={personalDetails.middleName}  />\n                         \n                        </div> \n                        <div className=\"column\">\n                          <label htmlFor=\"lastName\">Last Name  <span className=\"fieldError\">{validation.errors.get(\"lastName\")}</span></label>\n                          <input id=\"lastName\" onChange={handleChange} value={personalDetails.lastName}  />\n                         \n                        </div>\n                   \n                  </div>\n\n                  <div className=\"three-column-row\">\n                      <div className=\"column\">\n                          <label htmlFor=\"gender\">Gender  <span className=\"fieldError\">{validation.errors.get(\"gender\")}</span></label>\n                          <select id=\"gender\" onChange={handleChange} value={personalDetails.gender}  >\n                              <option value=\"\" />\n                              <option value={\"Male\"}>Male</option>\n                              <option value={\"Female\"}>Female</option>\n                          </select>\n                      </div>\n                      <div className=\"column\">\n                          <label htmlFor=\"dob\">Date Of Birth  <span className=\"fieldError\">{validation.errors.get(\"dob\")}</span></label>\n                          <input id=\"dob\" type=\"date\" onChange={handleDateChange} value={personalDetails.dob}  />\n                      </div>\n                      <div className=\"column\">\n                          <label htmlFor=\"placeOfBirthTown\">Place Of Birth  <span className=\"fieldError\">{validation.errors.get(\"placeOfBirthTown\")}</span></label>\n                          <input id=\"placeOfBirthTown\" onChange={handleChange} value={personalDetails.placeOfBirthTown}  />\n                      </div>\n                  </div>\n\n                  \n\n                  <div className=\"two-column-row\">\n                      <div className=\"column\">\n                         <button  size=\"small\" color=\"primary\" onClick={handleSaveNow}>Save And Logout</button>\n                      </div>\n                      <div className=\"column\">\n                         <button size=\"small\" color=\"primary\" disabled={buttonState} onClick={handleForward}>Next</button>\n                      </div>\n                  </div>\n\n              </div>\n\n              </div>\n              \n     \n\n    </div>\n\n\n  )\n}\n\n\nexport default PersonalDetails;\n\n\n\n"]},"metadata":{},"sourceType":"module"}