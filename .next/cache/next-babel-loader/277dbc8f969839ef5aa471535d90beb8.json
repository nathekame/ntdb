{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/home/noa/ntdbProject/app/NTDB/components/profile/common/profilePic.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport { ProfileContext } from '../../../store/contexts/profileContext';\nimport Navbar from '../../layouts/navbar';\nimport '../../../public/assets/sass/index.scss';\nimport Logout from '../../../utility/logout';\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { base64StringtoFile, extractImageFileExtensionFromBase64, image64toCanvasRef } from '../fileUtility';\nimport axiosFuncs from '../../../utility/axios'; //   const cropper = React.createRef(null);\n\nvar ProfilePic = function ProfilePic(props) {\n  var _useContext = useContext(ProfileContext),\n      dispatch = _useContext.dispatch;\n\n  var imagePreviewCanvasRef = React.createRef();\n\n  var _useState = useState({\n    profileStep: 7,\n    profilePicUrl: '',\n    profilePicFile: '',\n    crop: {\n      // unit: 'px',\n      aspect: 1 / 1 //    width: 50,\n\n    }\n  }),\n      profilePic = _useState[0],\n      setProfilePic = _useState[1];\n\n  var handleImageChange = function handleImageChange(e) {\n    e.preventDefault();\n    var reader = new FileReader();\n    var profilePicFile = e.target.files[0]; //   console.log(\"this is the imagfe check view ===================>>>>>>>>>>>>>\" +profilePicFile);\n\n    reader.onloadend = function () {\n      setProfilePic(_objectSpread({}, profilePic, {\n        profilePicFile: profilePicFile,\n        profilePicUrl: reader.result\n      }));\n    };\n\n    reader.readAsDataURL(profilePicFile);\n  }; // from here\n\n\n  var handleCrop = function handleCrop(crop, percentCrop) {\n    console.log(\"this is the crop \" + JSON.stringify(crop));\n    console.log(\"this is the percent crop \" + JSON.stringify(percentCrop)); //onComplete(crop, percentCrop)\n\n    setProfilePic(_objectSpread({}, profilePic, {\n      crop: percentCrop\n    }));\n  };\n\n  var handleImageLoaded = function handleImageLoaded(image) {\n    console.log(\"the image that is loaded\" + image);\n  };\n\n  var handleCompleteCrop = function handleCompleteCrop(crop, pixelCrop) {\n    console.log(\"the crop and the pixel \" + JSON.stringify(crop) + JSON.stringify(pixelCrop));\n    var canvasRef = imagePreviewCanvasRef.current;\n    var imgSrc = profilePic.profilePicUrl;\n    image64toCanvasRef(canvasRef, imgSrc, crop);\n  }; // save the successfully cropped image to state \n\n\n  var handleImageSaveWithCrop = function handleImageSaveWithCrop(e) {\n    e.preventDefault();\n    var canvasRef = imagePreviewCanvasRef.current;\n    var imgSrc = profilePic.profilePicUrl;\n    var fileExtension = extractImageFileExtensionFromBase64(imgSrc);\n    var imageDate64 = canvasRef.toDataURL('image/' + fileExtension);\n    console.log(\"the profilePicFile extension is this ===>> \" + fileExtension);\n    var newFileName = \"nomalevo.\" + fileExtension;\n    console.log(\"the new profilePicFile name \" + newFileName); // profilePicFile to be uploaded\n\n    var newCroppedFile = base64StringtoFile(imageDate64, newFileName); //   console.log(\"this si the final cropped \"+JSON.stringify(newCroppedFile));\n    //  console.log(\"this is the imagfe check view cropped profilePicFile ===================>>>>>>>>>>>>>\" +newCroppedFile);\n\n    setProfilePic(_objectSpread({}, profilePic, {\n      profilePicFile: newCroppedFile\n    }));\n    var stateObj = {\n      profileStep: 8,\n      profilePicUrl: profilePic.profilePicUrl,\n      profilePicFile: newCroppedFile\n    }; //     this.props.fileStateUpdate(profilePic);\n    //props.fileStateUpdate(stateObj);\n    //download the profilePicFile\n    // downloadBase64File(imageDate64, newFileName)\n  }; // save the image  to state without cropping it\n\n\n  var handleImageSaveWithoutCrop = function handleImageSaveWithoutCrop(e) {\n    e.preventDefault(); // setProfilePic({ ...profilePic, profilePicFile: newCroppedFile })  \n    // this.setState({\n    //   profileStep: 8\n    //  // profilePicFile: newCroppedFile   \n    //   })\n    //   const stateObj = {\n    //     profileStep:8,\n    //     profilePicUrl: profilePic.profilePicUrl,\n    //     profilePicFile: profilePic.profilePicFile,\n    //   }\n    //   //   this.props.fileStateUpdate(profilePicj);\n    // this.props.fileStateUpdate(stateObj);\n  };\n\n  var checkToSkipCrop = function checkToSkipCrop() {\n    if (profilePic.profilePicUrl) {\n      return \"inline\";\n    } else {\n      return \"none\";\n    }\n  };\n\n  var checkToUpladCropped = function checkToUpladCropped() {\n    if (profilePic.crop.height) {\n      return \"inline\";\n    } else {\n      return \"none\";\n    }\n  };\n\n  var styles = {\n    // height: '50vh',\n    //   minHeight: '93vh'\n    width: \"200\",\n    height: \"500\"\n  };\n  var conStyle = {\n    // height: '50vh',\n    //   minHeight: '93vh'\n    //   display:\"inline\"\n    cropped: {\n      display: checkToUpladCropped()\n    },\n    notCropped: {\n      display: checkToSkipCrop()\n    }\n  }; // to here\n  // const  handleChange =(e) => {\n  //         e.preventDefault(); \n  //         setProfilePic({ ...profilePic, [e.target.id]: e.target.value })\n  //       }\n\n  var handleForward = function handleForward(e) {\n    var next, go;\n    return _regeneratorRuntime.async(function handleForward$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault(); //   dispatch({type: 'ADD_PROFILE_DATA', payload: profilePic});\n\n            dispatch({\n              type: 'ADD_PROFILE_DATA',\n              payload: {\n                profilePic: profilePic\n              }\n            });\n            next = \"F\";\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(props.updatestep(next));\n\n          case 5:\n            go = _context.sent;\n            dispatch({\n              type: 'CURRENT_STEP',\n              payload: profilePic.profileStep + 1\n            });\n\n            if (!go) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", go);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleBack = function handleBack(e) {\n    var next, go;\n    return _regeneratorRuntime.async(function handleBack$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault();\n            next = \"B\";\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(props.updatestep(next));\n\n          case 4:\n            go = _context2.sent;\n            dispatch({\n              type: 'CURRENT_STEP',\n              payload: profilePic.profileStep - 1\n            });\n\n            if (!go) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", go);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleSaveNow = function handleSaveNow(e) {\n    return _regeneratorRuntime.async(function handleSaveNow$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            //  console.log(\"i am here to save first foitiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii\");\n            e.preventDefault(); // const data =  {...profilePic,  profileStep: profilePic.profileStep+1};\n            // let api = await axiosFuncs.profilePost(data);\n            // if(api.data === \"error\" ){\n            //   console.log(\"the log is error\");\n            // }\n            // if (api.data === \"success\") {\n            //   console.log(\"the log is success\"+api.status);\n            //   // router.push('/account')\n            //   dispatch({type: 'CLEAR_CONTEXT'});\n            //   Logout();\n            // }\n\n            dispatch({\n              type: 'CLEAR_CONTEXT'\n            });\n            Logout(); //logout();\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(\"div\", {\n    className: \"pagegrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 5\n    }\n  }, __jsx(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"innergrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"profile-form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  }, \"Profile Pic\"), __jsx(\"div\", {\n    className: \"one-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    style: conStyle.notCropped,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 21\n    }\n  }, \"Drag you mouse over the image to crop or click the button below to skip\"), __jsx(\"input\", {\n    type: \"file\",\n    id: \"profilePic\",\n    onChange: function onChange(e) {\n      return handleImageChange(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 21\n    }\n  }))), __jsx(\"div\", {\n    className: \"two-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 19\n    }\n  }, __jsx(ReactCrop, {\n    src: profilePic.profilePicUrl,\n    onImageLoaded: handleImageLoaded,\n    onComplete: handleCompleteCrop,\n    circularCrop: \"true\",\n    crop: profilePic.crop,\n    onChange: handleCrop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 23\n    }\n  }), __jsx(\"button\", {\n    style: conStyle.notCropped,\n    onClick: handleImageSaveWithoutCrop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 23\n    }\n  }, \" Skip Cropping And Upload Image \")), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 19\n    }\n  }, __jsx(\"canvas\", {\n    ref: imagePreviewCanvasRef,\n    style: styles,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 21\n    }\n  }), __jsx(\"button\", {\n    style: conStyle.cropped,\n    onClick: handleImageSaveWithCrop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 21\n    }\n  }, \" Upload  Cropped Image \"))), __jsx(\"div\", {\n    className: \"three-column-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    variant: \"outlined\",\n    size: \"small\",\n    color: \"primary\",\n    onClick: handleBack,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 26\n    }\n  }, \" Back \")), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    onClick: handleSaveNow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 26\n    }\n  }, \"Save And Logout\")), __jsx(\"div\", {\n    className: \"column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    onClick: handleForward,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 26\n    }\n  }, \"Next\"))))));\n};\n\nexport default ProfilePic;","map":{"version":3,"sources":["/home/noa/ntdbProject/app/NTDB/components/profile/common/profilePic.js"],"names":["React","useState","useContext","ProfileContext","Navbar","Logout","ReactCrop","base64StringtoFile","extractImageFileExtensionFromBase64","image64toCanvasRef","axiosFuncs","ProfilePic","props","dispatch","imagePreviewCanvasRef","createRef","profileStep","profilePicUrl","profilePicFile","crop","aspect","profilePic","setProfilePic","handleImageChange","e","preventDefault","reader","FileReader","target","files","onloadend","result","readAsDataURL","handleCrop","percentCrop","console","log","JSON","stringify","handleImageLoaded","image","handleCompleteCrop","pixelCrop","canvasRef","current","imgSrc","handleImageSaveWithCrop","fileExtension","imageDate64","toDataURL","newFileName","newCroppedFile","stateObj","handleImageSaveWithoutCrop","checkToSkipCrop","checkToUpladCropped","height","styles","width","conStyle","cropped","display","notCropped","handleForward","type","payload","next","updatestep","go","handleBack","handleSaveNow"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\n\nimport { ProfileContext } from '../../../store/contexts/profileContext'\n\nimport Navbar from '../../layouts/navbar'\n\nimport '../../../public/assets/sass/index.scss';\n\nimport Logout from '../../../utility/logout'\n\n\nimport ReactCrop from 'react-image-crop'\n\nimport 'react-image-crop/dist/ReactCrop.css';\n\n\nimport  { base64StringtoFile,  extractImageFileExtensionFromBase64, image64toCanvasRef} from '../fileUtility'\nimport axiosFuncs from '../../../utility/axios';\n\n\n\n\n //   const cropper = React.createRef(null);\n\nconst ProfilePic = (props) => {\n\n\n\n      const { dispatch  } = useContext(ProfileContext);\n\n      const imagePreviewCanvasRef = React.createRef();\n\n      const [profilePic, setProfilePic] = useState(\n              {\n    \n                profileStep: 7,\n                profilePicUrl: '',\n                profilePicFile: '',\n                crop: {\n                // unit: 'px',\n                  aspect: 1 / 1 ,\n              //    width: 50,\n                } \n\n\n              })\n\n     \n\n\n\n  const handleImageChange = (e) => {\n            e.preventDefault();\n\n            let reader = new FileReader();\n            let profilePicFile = e.target.files[0];\n\n        //   console.log(\"this is the imagfe check view ===================>>>>>>>>>>>>>\" +profilePicFile);\n\n            reader.onloadend = () => {\n                setProfilePic({ ...profilePic, profilePicFile: profilePicFile, profilePicUrl: reader.result })  \n            }\n\n            reader.readAsDataURL(profilePicFile)\n          }\n// from here\n\n\n\nconst handleCrop = (crop, percentCrop) => {\n\n  console.log(\"this is the crop \"+JSON.stringify(crop));\n\n  console.log(\"this is the percent crop \"+JSON.stringify(percentCrop));\n\n\n  //onComplete(crop, percentCrop)\n  setProfilePic({ ...profilePic,  crop: percentCrop })  \n\n}\n\nconst handleImageLoaded = (image) => {\n\n            console.log(\"the image that is loaded\"+image);\n          \n          }\n          \nconst handleCompleteCrop = (crop, pixelCrop) => {\n\n console.log(\"the crop and the pixel \"+JSON.stringify(crop) + JSON.stringify(pixelCrop));\n\n  const canvasRef = imagePreviewCanvasRef.current\n\n  const imgSrc = profilePic.profilePicUrl\n\n  image64toCanvasRef(canvasRef, imgSrc, crop)\n\n}\n\n\n// save the successfully cropped image to state \nconst handleImageSaveWithCrop = (e) => {\n\n  e.preventDefault();\n\n  const canvasRef = imagePreviewCanvasRef.current\n  const imgSrc = profilePic.profilePicUrl\n  const fileExtension = extractImageFileExtensionFromBase64(imgSrc)\n  const imageDate64 = canvasRef.toDataURL('image/'+ fileExtension)\n\n  console.log(\"the profilePicFile extension is this ===>> \"+fileExtension);\n\n  const newFileName = \"nomalevo.\" + fileExtension\n\n  console.log(\"the new profilePicFile name \"+newFileName);\n\n  // profilePicFile to be uploaded\n  const newCroppedFile = base64StringtoFile(imageDate64, newFileName)\n\n//   console.log(\"this si the final cropped \"+JSON.stringify(newCroppedFile));\n\n//  console.log(\"this is the imagfe check view cropped profilePicFile ===================>>>>>>>>>>>>>\" +newCroppedFile);\n     setProfilePic({ ...profilePic, profilePicFile: newCroppedFile })  \n\n\n\n  const stateObj = {\n      profileStep:8,\n      profilePicUrl: profilePic.profilePicUrl,\n      profilePicFile: newCroppedFile\n\n    }\n\n//     this.props.fileStateUpdate(profilePic);\n\n\n  //props.fileStateUpdate(stateObj);\n\n\n   //download the profilePicFile\n// downloadBase64File(imageDate64, newFileName)\n\n\n\n\n\n\n}\n\n\n\n// save the image  to state without cropping it\nconst handleImageSaveWithoutCrop = (e) => {\n  e.preventDefault();\n\n  // setProfilePic({ ...profilePic, profilePicFile: newCroppedFile })  \n\n  // this.setState({\n  //   profileStep: 8\n  //  // profilePicFile: newCroppedFile   \n  //   })\n\n  //   const stateObj = {\n  //     profileStep:8,\n  //     profilePicUrl: profilePic.profilePicUrl,\n  //     profilePicFile: profilePic.profilePicFile,\n\n  //   }\n  //   //   this.props.fileStateUpdate(profilePicj);\n\n\n  // this.props.fileStateUpdate(stateObj);\n\n\n\n}\n\n\n\n\nconst checkToSkipCrop = () => {\n\n  if(profilePic.profilePicUrl){\n    return \"inline\"\n  } else {\n    return \"none\"\n  }\n  \n\n}\n\n\nconst checkToUpladCropped = () => {\n\n  if(profilePic.crop.height){\n    return \"inline\"\n  } else {\n    return \"none\"\n  }\n\n}\n\nconst styles = {\n  // height: '50vh',\n  //   minHeight: '93vh'\n    width:\"200\" ,\n   height:\"500\"\n  }\n\nconst conStyle = {\n    // height: '50vh',\n    //   minHeight: '93vh'\n   //   display:\"inline\"\n   cropped : { display: checkToUpladCropped() },\n   notCropped : { display: checkToSkipCrop() }\n      \n    }\n\n\n// to here\n\n// const  handleChange =(e) => {\n//         e.preventDefault(); \n//         setProfilePic({ ...profilePic, [e.target.id]: e.target.value })\n\n//       }\n\n\nconst handleForward = async e => {\n\n        e.preventDefault();\n        //   dispatch({type: 'ADD_PROFILE_DATA', payload: profilePic});\n        dispatch({type: 'ADD_PROFILE_DATA', payload: {profilePic: profilePic}});\n\n        const next = \"F\"\n        const go = await props.updatestep(next);\n        dispatch({type: 'CURRENT_STEP', payload: profilePic.profileStep+1});\n        if(go){\n        return go\n        }\n\n        }\n\nconst handleBack = async e => {\n\n        e.preventDefault();\n\n        const next = \"B\"\n        const go = await props.updatestep(next);\n        dispatch({type: 'CURRENT_STEP', payload: profilePic.profileStep-1});\n        if(go){\n\n        return go\n        }\n\n        }\n\n\nconst handleSaveNow = async e => {\n\n\n      //  console.log(\"i am here to save first foitiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii\");\n\n      e.preventDefault();\n\n      // const data =  {...profilePic,  profileStep: profilePic.profileStep+1};\n      \n\n      // let api = await axiosFuncs.profilePost(data);\n      // if(api.data === \"error\" ){\n      //   console.log(\"the log is error\");\n      // }\n      // if (api.data === \"success\") {\n      //   console.log(\"the log is success\"+api.status);\n\n      //   // router.push('/account')\n      //   dispatch({type: 'CLEAR_CONTEXT'});\n      //   Logout();\n        \n      // }\n\n      dispatch({type: 'CLEAR_CONTEXT'});\n      Logout();\n\n      //logout();\n\n      }\n\n \n\n\n  return (\n\n\n\n    <div className=\"pagegrid\">\n      <Navbar />\n\n        <div className=\"innergrid\">\n\n            <div className=\"profile-form\" >\n\n            <h3>Profile Pic</h3>\n\n\n            <div className=\"one-column-row\">\n                  <div className=\"column\">\n                                      \n                    <div style={conStyle.notCropped} >Drag you mouse over the image to crop or click the button below to skip</div>\n                    <input  type='file' id=\"profilePic\" onChange={(e)=>handleImageChange(e)} />\n                 \n                      \n                  </div>\n            </div>\n\n            <div className=\"two-column-row\">\n                  <div className=\"column\">\n                                      \n                      <ReactCrop \n                      src={profilePic.profilePicUrl}\n                      onImageLoaded={handleImageLoaded}\n                      onComplete={handleCompleteCrop} \n                      circularCrop=\"true\"\n                      crop={profilePic.crop} \n                      onChange={handleCrop} />\n\n                      <button style={conStyle.notCropped} onClick={handleImageSaveWithoutCrop}> Skip Cropping And Upload Image </button>\n\n              \n                  </div>\n                  <div className=\"column\">\n                    <canvas ref={imagePreviewCanvasRef} style={styles} ></canvas> \n                    <button  style={conStyle.cropped} onClick={handleImageSaveWithCrop}> Upload  Cropped Image </button>\n        \n                  </div>\n            </div>\n\n\n\n\n\n            <div className=\"three-column-row\">\n                      <div className=\"column\">\n                         <button variant=\"outlined\"   size=\"small\" color=\"primary\" onClick={handleBack}>\tBack </button>\n                      </div>\n                      <div className=\"column\">\n                         <button  size=\"small\" color=\"primary\" onClick={handleSaveNow}>Save And Logout</button>\n                      </div>\n                      <div className=\"column\">\n                         <button size=\"small\" color=\"primary\" onClick={handleForward}>Next</button>\n                      </div>\n                  </div>\n\n            </div>\n        </div>\n    </div>\n\n\n\n  )\n}\n\n\nexport default ProfilePic;\n\n\n\n"]},"metadata":{},"sourceType":"module"}