{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/home/noa/ntdbProject/app/NTDB/components/auth/register.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\nimport Cookie from 'js-cookie';\nimport jwtFuncs from '../../utility/jwt';\nimport Link from 'next/link';\nimport Validator from 'validatorjs';\nimport axiosFuncs from '../../utility/axios';\nimport localStorageFuncs from '../../utility/localStorage';\n\nvar Register = function Register(props) {\n  var router = useRouter();\n\n  var _useState = useState({\n    email: '',\n    password: '',\n    cpassword: ''\n  }),\n      userLogin = _useState[0],\n      setUserLogin = _useState[1];\n\n  var rules = {\n    email: 'required|email',\n    password: 'required',\n    cpassword: 'required|same:password'\n  };\n  var validation = new Validator(userLogin, rules, {\n    required: 'required*'\n  });\n  validation.fails(); // true\n\n  validation.passes(); // false\n\n  var handleChange = function handleChange(e) {\n    setUserLogin(_objectSpread({}, userLogin, _defineProperty({}, e.target.id, e.target.value)));\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    var data, api, token;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            console.log(\"the current state before submit state \" + JSON.stringify(userLogin));\n            data = {\n              email: userLogin.email,\n              password: userLogin.password\n            };\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(axiosFuncs.userRegister(data));\n\n          case 5:\n            api = _context.sent;\n            token = api.data.userToken;\n            console.log(\"this is the status from the register\" + api.status);\n\n            if (api.data === \"error\") {\n              console.log(\"the log is error\");\n              router.push('/register');\n            }\n\n            if (api.status === 201) {\n              console.log(\"the log is success\" + api.status);\n\n              if (token) {\n                Cookie.set(\"auth\", token);\n                localStorageFuncs.setItemInStorage(\"auth\", token);\n              }\n\n              router.push('/profile');\n            } //   const localJWT = () => {\n            //     const localCookie = Cookie.get('auth'); \n            //     return localCookie ? localCookie : undefined;\n            // //    const localJWT = localStorage.getItem(\"jwt\");\n            //  //   return localJWT ? JSON.parse(localJWT) : '';\n            // }\n\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleLink = function handleLink() {\n    var next, go;\n    return _regeneratorRuntime.async(function handleLink$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            next = 1;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(props.updatestep(next));\n\n          case 3:\n            go = _context2.sent;\n\n            if (!go) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", go);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(\"div\", {\n    \"class\": \"pagegrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"innergrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, __jsx(\"form\", {\n    \"class\": \"form\",\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 31\n    }\n  }, \" Register \"), __jsx(\"div\", {\n    \"class\": \"grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 31\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Email \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 62\n    }\n  }, validation.errors.get(\"email\"))), __jsx(\"input\", {\n    onChange: handleChange,\n    name: \"email\",\n    id: \"email\",\n    type: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    \"class\": \"grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 31\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  }, \"Password \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 68\n    }\n  }, validation.errors.get(\"password\"))), __jsx(\"input\", {\n    onChange: handleChange,\n    name: \"password\",\n    id: \"password\",\n    type: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    \"class\": \"grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 31\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"cpassword\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }, \"Confirm Password \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 77\n    }\n  }, validation.errors.get(\"cpassword\"))), __jsx(\"input\", {\n    onChange: handleChange,\n    name: \"cpassword\",\n    id: \"cpassword\",\n    type: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    \"class\": \"grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 31\n    }\n  }, __jsx(\"button\", {\n    \"class\": \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, \"submit\")), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 31\n    }\n  }, \"Already Registered?  \", __jsx(Link, {\n    href: \"/login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 55\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 75\n    }\n  }, \"Login\"))))));\n};\n\nexport default Register; //export default  withStyles(Register);","map":{"version":3,"sources":["/home/noa/ntdbProject/app/NTDB/components/auth/register.js"],"names":["React","useState","useEffect","axios","useRouter","Cookie","jwtFuncs","Link","Validator","axiosFuncs","localStorageFuncs","Register","props","router","email","password","cpassword","userLogin","setUserLogin","rules","validation","required","fails","passes","handleChange","e","target","id","value","handleSubmit","preventDefault","console","log","JSON","stringify","data","userRegister","api","token","userToken","status","push","set","setItemInStorage","handleLink","next","updatestep","go","errors","get"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport axios from 'axios';\n\nimport { useRouter } from 'next/router'\n\nimport Cookie from 'js-cookie'\n\nimport jwtFuncs from '../../utility/jwt'\n\nimport Link from 'next/link'\n\nimport Validator from 'validatorjs';\nimport axiosFuncs from '../../utility/axios';\nimport localStorageFuncs from '../../utility/localStorage';\n\n\n\nconst Register = (props) => {\n\n      const router = useRouter()\n\n\n      const [userLogin, setUserLogin] = useState(\n          {\n            email: '',\n            password: '',\n            cpassword:''\n          \n          }\n      );\n\n      let rules = {\n        email: 'required|email',\n        password: 'required',\n        cpassword: 'required|same:password',\n      };\n      \n      let validation = new Validator(userLogin, rules, { required: 'required*' });\n    \n      validation.fails(); // true\n      validation.passes(); // false\n\n\n    const  handleChange =(e) => {\n          setUserLogin({ ...userLogin, [e.target.id]: e.target.value })\n    \n      }\n      \n    const  handleSubmit = async (e) => {\n\n        e.preventDefault();\n\n        console.log(\"the current state before submit state \"+JSON.stringify(userLogin));\n\n        const data = {\n          email: userLogin.email,\n          password: userLogin.password\n        }\n\n        \n        let api = await axiosFuncs.userRegister(data);\n        const token = api.data.userToken;\n        console.log(\"this is the status from the register\"+api.status);\n         if(api.data === \"error\" ){\n           console.log(\"the log is error\");\n           router.push('/register');\n          }\n         if (api.status === 201) {\n           console.log(\"the log is success\"+api.status);\n              if(token){\n                Cookie.set(\"auth\", token);\n                localStorageFuncs.setItemInStorage(\"auth\", token);\n               }\n           router.push('/profile')\n           \n         }\n\n      //   const localJWT = () => {\n\n      //     const localCookie = Cookie.get('auth'); \n\n      //     return localCookie ? localCookie : undefined;\n\n      // //    const localJWT = localStorage.getItem(\"jwt\");\n      //  //   return localJWT ? JSON.parse(localJWT) : '';\n\n      // }\n    }\n      \n\n    const handleLink = async()=>{\n      const next = 1;\n      const go = await props.updatestep(next);\n      if(go){\n        return go\n      }\n    }\n\n        \n      return (\n\n        \n            <div class=\"pagegrid\">\n\n                  <div class=\"innergrid\">\n\n                        <form class=\"form\"  onSubmit={handleSubmit} >\n                                                             \n                              <h1> Register </h1>\n                              <div class=\"grid\">\n                                <label htmlFor=\"email\">Email <span className=\"fieldError\">{validation.errors.get(\"email\")}</span></label>\n                                <input onChange={handleChange}  name=\"email\" id=\"email\" type=\"email\" />\n                              </div>\n                              <div class=\"grid\">\n                                <label htmlFor=\"password\">Password <span className=\"fieldError\">{validation.errors.get(\"password\")}</span></label>\n                                <input onChange={handleChange}  name=\"password\" id=\"password\" type=\"password\" />\n                              </div>\n                              <div class=\"grid\">\n                                <label htmlFor=\"cpassword\">Confirm Password <span className=\"fieldError\">{validation.errors.get(\"cpassword\")}</span></label>\n                                <input onChange={handleChange}  name=\"cpassword\" id=\"cpassword\" type=\"password\" />\n                              </div>\n\n                              <div class=\"grid\">\n                                <button class=\"button\">submit</button>\n                              </div>\n                              <p>Already Registered?  <Link href=\"/login\"><a>Login</a></Link></p>\n                                \n                        </form>\n\n                      \n                  </div>\n            </div>\n      )\n}\n\n\n\n\nexport default Register;\n\n\n//export default  withStyles(Register);\n"]},"metadata":{},"sourceType":"module"}