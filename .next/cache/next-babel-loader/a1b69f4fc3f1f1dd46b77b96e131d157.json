{"ast":null,"code":"var _jsxFileName = \"/home/noa/ntdbProject/app/NTDB/components/profile/bioInformation.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport moment from 'moment';\nimport Cookie from 'js-cookie';\nimport { ProfileContext } from '../../../store/contexts/profileContext';\nimport jwtFuncs from '../../../utility/jwt';\nimport localStorageFuncs from '../../../utility/localStorage';\nimport logout from '../../../utility/logout';\nimport Navbar from '../../layouts/navbar';\nimport '../../public/assets/style.scss';\nimport Logout from '../../../utility/logout';\nimport checkInLocalStorage from '../../utility/persistLocalToState';\nimport axiosFuncs from '../../../utility/axios';\nimport Validator from 'validatorjs'; //   const cropper = React.createRef(null);\n//  const buttonStyle = {\n//   backgroundColor: 'blue',\n//  // backgroundImage: 'url(' + imgUrl + ')',\n// };\n\nconst PersonalDetails = props => {\n  // console.log(\"this is the passed in props +\"+JSON.stringify(props));\n  //const localCookie = Cookie.get('auth'); \n  //console.log(\"this is the local cookie from Bio Information       nnnnnn    ----->>>>>>>>>>>>> \"+localCookie);\n  const {\n    dispatch\n  } = useContext(ProfileContext);\n  const currentProfile = useContext(ProfileContext);\n  const profileValue = currentProfile.profile.personalDetails;\n\n  const profileDetails = val => {\n    if (val === undefined) {\n      return;\n    } else {\n      return val;\n    }\n  };\n\n  console.log(\"this is the current contect =============>>>>>>>>>>> \" + JSON.stringify(currentProfile)); // console.log(\"this is the current contect =============>>>>>>>>>>> \"+currentProfile.profile.personalDetails.firstName);\n  // const checkInLocalStorage = (val) => {\n  //   const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n  //   const localStorageValue = getLocalItem.personalDetails[val]\n  //   if(localStorageValue !== undefined){\n  //   //  console.log(\"there is a value   -->>\"+localValue);\n  //     return localStorageValue\n  //   }else{\n  //     return ''\n  //   }\n  // }\n\n  const {\n    0: personalDetails,\n    1: setPersonalDetails\n  } = useState({\n    //  nextProfileStep: 2,\n    profileStep: 1,\n    firstName: checkInLocalStorage(\"personalDetails\", \"firstName\"),\n    middleName: checkInLocalStorage(\"personalDetails\", \"middleName\"),\n    lastName: checkInLocalStorage(\"personalDetails\", \"lastName\"),\n    gender: checkInLocalStorage(\"personalDetails\", \"gender\"),\n    dob: checkInLocalStorage(\"personalDetails\", \"dob\"),\n    placeOfBirthTown: checkInLocalStorage(\"personalDetails\", \"placeOfBirthTown\"),\n    stateOfOrigin: checkInLocalStorage(\"personalDetails\", \"stateOfOrigin\"),\n    lgaOfOrigin: checkInLocalStorage(\"personalDetails\", \"lgaOfOrigin\")\n  });\n  const {\n    0: buttonState,\n    1: setButtonState\n  } = useState(true);\n  let rules = {\n    firstName: 'required',\n    // middleName: 'required|email',\n    lastName: 'required',\n    gender: 'required',\n    dob: 'required',\n    placeOfBirthTown: 'required',\n    stateOfOrigin: 'required',\n    lgaOfOrigin: 'required' //  email: 'required|email',\n    //  age: 'min:18'\n\n  };\n  let validation = new Validator(personalDetails, rules, {\n    required: 'required*'\n  });\n  validation.fails(); // true\n\n  validation.passes(); // false\n  // if (validation.fails()) {\n  //   console.log(\"the validation has failed thats why u see this \"+validation.errors.get(\"firstNameame\"));\n  //   // Error messages\n  // validation.errors.first('email'); // 'The email format is invalid.'\n  // validation.errors.get('email');\n  // }\n\n  useEffect(() => {\n    if (validation.passes()) {\n      setButtonState(false); // console.log(\"the   buttonStete \"+buttonState);  \n    } else {\n      setButtonState(true);\n    }\n  }, [personalDetails]);\n\n  const handleDateChange = date => {\n    //setSelectedDate(date);\n    setPersonalDetails(_objectSpread({}, personalDetails, {\n      dob: moment(date).format('YYYY-MM-DD')\n    }));\n  };\n\n  const handleChange = e => {\n    e.preventDefault();\n    setPersonalDetails(_objectSpread({}, personalDetails, {\n      [e.target.id]: e.target.value\n    }));\n  };\n\n  const handleForward = async e => {\n    e.preventDefault();\n\n    if (validation.passes()) {\n      dispatch({\n        type: 'ADD_PROFILE_DATA',\n        payload: {\n          personalDetails: personalDetails\n        }\n      });\n      const next = \"F\";\n      const go = await props.updatestep(next);\n      dispatch({\n        type: 'CURRENT_STEP',\n        payload: personalDetails.profileStep + 1\n      });\n\n      if (go) {\n        //  console.log(\"all has gone well with the profile update from the props--->>>> \"+props.currentStep);\n        return go;\n      }\n    }\n  };\n\n  const handleSaveNow = async e => {\n    e.preventDefault(); // setPersonalDetails({ ...personalDetails, profileStep: personalDetails.profileStep+1 });\n\n    const data = _objectSpread({}, personalDetails, {\n      profileStep: personalDetails.profileStep + 1\n    });\n\n    console.log(\"the data  \" + JSON.stringify(personalDetails));\n\n    if (validation.passes()) {\n      let api = await axiosFuncs.profilePost(data);\n\n      if (api.data === \"error\") {\n        console.log(\"the log is error\");\n      }\n\n      if (api.data === \"success\") {\n        console.log(\"the log is success\" + api.status); // router.push('/account')\n      }\n\n      dispatch({\n        type: 'CLEAR_CONTEXT'\n      });\n      Logout();\n    } else {\n      dispatch({\n        type: 'CLEAR_CONTEXT'\n      });\n      Logout();\n    } // props.createProfile(props.stateData);\n    //  logout();\n\n  };\n\n  const persistToLocalStorage = () => {\n    const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n\n    if (getLocalItem !== undefined) {} else {\n      // console.log(\"i=the local storage is empty make i put something insidehinixdopd\")\n      //  const newData = {...getLocalItem, personalDetails };\n      const setLocalItem = localStorageFuncs.setItemInStorage(\"profile\", personalDetails);\n      return setLocalItem;\n    }\n  };\n\n  useEffect(() => {\n    // set local storage\n    //console.log(\"this is the use effect running up and downnnnnnn   nooooooooooooowwwwwwwwwwww\")\n    // dispatch({type: 'CLEAR_DATA'});\n    persistToLocalStorage(); // persistToState();\n    // checkLocalStorage(\"firstName\");\n  });\n  return __jsx(\"div\", {\n    className: \"pagegrid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 5\n    }\n  }, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"innergrid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"profile-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 19\n    }\n  }, \"Bio Information    1\"), __jsx(\"div\", {\n    className: \"three-column-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"firstName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 27\n    }\n  }, \"First Name  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 66\n    }\n  }, validation.errors.get(\"firstName\"))), __jsx(\"input\", {\n    className: \"firstName\",\n    id: \"firstName\",\n    onChange: handleChange,\n    value: personalDetails.firstName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"middleName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 27\n    }\n  }, \"Other Name \"), __jsx(\"input\", {\n    id: \"middleName\",\n    onChange: handleChange,\n    value: personalDetails.middleName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"lastName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 27\n    }\n  }, \"Last Name  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 64\n    }\n  }, validation.errors.get(\"lastName\"))), __jsx(\"input\", {\n    id: \"lastName\",\n    onChange: handleChange,\n    value: personalDetails.lastName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 27\n    }\n  }))), __jsx(\"div\", {\n    className: \"three-column-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"gender\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 27\n    }\n  }, \"Gender  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 59\n    }\n  }, validation.errors.get(\"gender\"))), __jsx(\"select\", {\n    id: \"gender\",\n    onChange: handleChange,\n    value: personalDetails.gender,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 27\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 31\n    }\n  }), __jsx(\"option\", {\n    value: \"Male\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 31\n    }\n  }, \"Male\"), __jsx(\"option\", {\n    value: \"Female\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 31\n    }\n  }, \"Female\"))), __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"dob\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 27\n    }\n  }, \"Date Of Birth  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 63\n    }\n  }, validation.errors.get(\"dob\"))), __jsx(\"input\", {\n    id: \"dob\",\n    type: \"date\",\n    onChange: handleDateChange,\n    value: personalDetails.dob,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"placeOfBirthTown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 27\n    }\n  }, \"Place Of Birth  \", __jsx(\"span\", {\n    className: \"fieldError\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 77\n    }\n  }, validation.errors.get(\"placeOfBirthTown\"))), __jsx(\"input\", {\n    id: \"placeOfBirthTown\",\n    onChange: handleChange,\n    value: personalDetails.placeOfBirthTown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 27\n    }\n  }))), __jsx(\"div\", {\n    className: \"two-column-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    onClick: handleSaveNow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 26\n    }\n  }, \"Save And Logout\")), __jsx(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 23\n    }\n  }, __jsx(\"button\", {\n    size: \"small\",\n    color: \"primary\",\n    disabled: buttonState,\n    onClick: handleForward,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 26\n    }\n  }, \"Next\"))))));\n};\n\nexport default PersonalDetails;","map":{"version":3,"sources":["/home/noa/ntdbProject/app/NTDB/components/profile/bioInformation.js"],"names":["React","useState","useEffect","useContext","moment","Cookie","ProfileContext","jwtFuncs","localStorageFuncs","logout","Navbar","Logout","checkInLocalStorage","axiosFuncs","Validator","PersonalDetails","props","dispatch","currentProfile","profileValue","profile","personalDetails","profileDetails","val","undefined","console","log","JSON","stringify","setPersonalDetails","profileStep","firstName","middleName","lastName","gender","dob","placeOfBirthTown","stateOfOrigin","lgaOfOrigin","buttonState","setButtonState","rules","validation","required","fails","passes","handleDateChange","date","format","handleChange","e","preventDefault","target","id","value","handleForward","type","payload","next","go","updatestep","handleSaveNow","data","api","profilePost","status","persistToLocalStorage","getLocalItem","getItemFromStorage","setLocalItem","setItemInStorage","errors","get"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useContext } from 'react'\n\nimport moment from 'moment'\n\n\nimport Cookie from 'js-cookie'\n\nimport { ProfileContext } from '../../../store/contexts/profileContext'\nimport jwtFuncs from '../../../utility/jwt'\n\nimport localStorageFuncs from '../../../utility/localStorage'\nimport logout from '../../../utility/logout';\n\nimport Navbar from '../../layouts/navbar'\n\nimport '../../public/assets/style.scss';\nimport Logout from '../../../utility/logout'\nimport checkInLocalStorage from '../../utility/persistLocalToState'\nimport axiosFuncs from '../../../utility/axios'\n\nimport Validator from 'validatorjs';\n\n\n //   const cropper = React.createRef(null);\n\n//  const buttonStyle = {\n//   backgroundColor: 'blue',\n//  // backgroundImage: 'url(' + imgUrl + ')',\n// };\n\n\n\n\nconst PersonalDetails = (props) => {\n\n // console.log(\"this is the passed in props +\"+JSON.stringify(props));\n\n\n  //const localCookie = Cookie.get('auth'); \n\n  //console.log(\"this is the local cookie from Bio Information       nnnnnn    ----->>>>>>>>>>>>> \"+localCookie);\n\n\n  const { dispatch } = useContext(ProfileContext);\n\n  const currentProfile = useContext(ProfileContext);\n\n  const profileValue = currentProfile.profile.personalDetails;\n\n  const profileDetails = (val) => {\n\n      if(val === undefined){\n          return\n      }else{\n        return val\n      }\n    }\n\n  console.log(\"this is the current contect =============>>>>>>>>>>> \"+JSON.stringify(currentProfile));\n\n // console.log(\"this is the current contect =============>>>>>>>>>>> \"+currentProfile.profile.personalDetails.firstName);\n\n// const checkInLocalStorage = (val) => {\n\n//   const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n//   const localStorageValue = getLocalItem.personalDetails[val]\n\n//   if(localStorageValue !== undefined){\n//   //  console.log(\"there is a value   -->>\"+localValue);\n//     return localStorageValue\n//   }else{\n//     return ''\n//   }\n// }\n\n\n  const [personalDetails, setPersonalDetails] = useState(\n          {\n          //  nextProfileStep: 2,\n            profileStep:1,\n            firstName: checkInLocalStorage(\"personalDetails\",\"firstName\"),\n            middleName: checkInLocalStorage(\"personalDetails\",\"middleName\"),\n            lastName: checkInLocalStorage(\"personalDetails\",\"lastName\"),\n            gender: checkInLocalStorage(\"personalDetails\",\"gender\"),\n            dob :  checkInLocalStorage(\"personalDetails\",\"dob\"),\n            placeOfBirthTown: checkInLocalStorage(\"personalDetails\",\"placeOfBirthTown\"),\n            stateOfOrigin: checkInLocalStorage(\"personalDetails\",\"stateOfOrigin\"),\n            lgaOfOrigin: checkInLocalStorage(\"personalDetails\",\"lgaOfOrigin\")\n          \n          }\n);\n\nconst [buttonState, setButtonState] = useState(true);\n\n                 \nlet rules = {\n\n  firstName: 'required',\n  // middleName: 'required|email',\n  lastName: 'required',\n  gender: 'required',\n  dob :  'required',\n  placeOfBirthTown: 'required',\n  stateOfOrigin: 'required',\n  lgaOfOrigin: 'required'\n\n//  email: 'required|email',\n//  age: 'min:18'\n};\n \nlet validation = new Validator(personalDetails, rules, { required: 'required*' });\n\nvalidation.fails(); // true\nvalidation.passes(); // false\n \n\n// if (validation.fails()) {\n//   console.log(\"the validation has failed thats why u see this \"+validation.errors.get(\"firstNameame\"));\n\n//   // Error messages\n// validation.errors.first('email'); // 'The email format is invalid.'\n// validation.errors.get('email');\n\n// }\n\n\n\nuseEffect(() => {\n\n\n    if (validation.passes()) {\n      setButtonState(false);\n     // console.log(\"the   buttonStete \"+buttonState);  \n    }else{\n      setButtonState(true);\n\n    }\n},[personalDetails]);\n\n\n\n\n\n\n const handleDateChange = date => {\n    //setSelectedDate(date);\n    setPersonalDetails({ ...personalDetails, dob: moment(date).format('YYYY-MM-DD') })\n\n  };\n\n  const  handleChange =(e) => {\n    e.preventDefault(); \n    setPersonalDetails({ ...personalDetails, [e.target.id]: e.target.value })\n\n  }\n\n const handleForward = async e => {\n\n    e.preventDefault();\n\n    if (validation.passes()) {    \n      dispatch({type: 'ADD_PROFILE_DATA', payload: {personalDetails: personalDetails}}); \n      const next = \"F\";\n      const go = await props.updatestep(next);\n      dispatch({type: 'CURRENT_STEP', payload: personalDetails.profileStep+1});\n      if(go){     \n      //  console.log(\"all has gone well with the profile update from the props--->>>> \"+props.currentStep);\n        return go\n      }\n      \n    }\n\n  \n\n\n}\n\n\nconst handleSaveNow = async e => {\n\n  e.preventDefault();\n\n // setPersonalDetails({ ...personalDetails, profileStep: personalDetails.profileStep+1 });\n\n  const data =  {...personalDetails,  profileStep: personalDetails.profileStep+1};\n\n  console.log(\"the data  \"+ JSON.stringify(personalDetails));\n\n  if (validation.passes()) {  \n      let api = await axiosFuncs.profilePost(data);\n      if(api.data === \"error\" ){\n        console.log(\"the log is error\");\n      }\n      if (api.data === \"success\") {\n        console.log(\"the log is success\"+api.status);\n        // router.push('/account')\n      }\n      dispatch({type: 'CLEAR_CONTEXT'});\n      Logout();\n\n  }else{\n    dispatch({type: 'CLEAR_CONTEXT'});\n    Logout();\n  }\n \n\n\n  \n\n // props.createProfile(props.stateData);\n \n\n//  logout();\n\n}\n\n\n\n\nconst persistToLocalStorage = () => {\n\n  const getLocalItem = localStorageFuncs.getItemFromStorage(\"profile\");\n\n  if(getLocalItem !== undefined){\n\n \n\n  }else{\n\n   // console.log(\"i=the local storage is empty make i put something insidehinixdopd\")\n  //  const newData = {...getLocalItem, personalDetails };\n    const setLocalItem = localStorageFuncs.setItemInStorage(\"profile\", personalDetails);\n\n    return setLocalItem;\n\n  }\n\n}\n\n\n\n\nuseEffect(() => {\n  // set local storage\n\n  //console.log(\"this is the use effect running up and downnnnnnn   nooooooooooooowwwwwwwwwwww\")\n // dispatch({type: 'CLEAR_DATA'});\n\n  persistToLocalStorage();\n  // persistToState();\n  // checkLocalStorage(\"firstName\");\n})\n\n\n\n  return (\n\n    <div className=\"pagegrid\">\n      <Navbar />\n\n        <div className=\"innergrid\">\n\n            <div className=\"profile-form\" >\n\n                  <h3>Bio Information    1</h3>\n\n                  <div className=\"three-column-row\">\n                    \n                        <div className=\"column\">\n                        \n                          <label htmlFor=\"firstName\">First Name  <span className=\"fieldError\">{validation.errors.get(\"firstName\")}</span></label> \n                          <input className=\"firstName\" id=\"firstName\" onChange={handleChange}  value={personalDetails.firstName} />\n                \n                        </div> \n                        <div className=\"column\">\n                          <label htmlFor=\"middleName\">Other Name </label>\n                          <input id=\"middleName\" onChange={handleChange} value={personalDetails.middleName}  />\n                         \n                        </div> \n                        <div className=\"column\">\n                          <label htmlFor=\"lastName\">Last Name  <span className=\"fieldError\">{validation.errors.get(\"lastName\")}</span></label>\n                          <input id=\"lastName\" onChange={handleChange} value={personalDetails.lastName}  />\n                         \n                        </div>\n                   \n                  </div>\n\n                  <div className=\"three-column-row\">\n                      <div className=\"column\">\n                          <label htmlFor=\"gender\">Gender  <span className=\"fieldError\">{validation.errors.get(\"gender\")}</span></label>\n                          <select id=\"gender\" onChange={handleChange} value={personalDetails.gender}  >\n                              <option value=\"\" />\n                              <option value={\"Male\"}>Male</option>\n                              <option value={\"Female\"}>Female</option>\n                          </select>\n                      </div>\n                      <div className=\"column\">\n                          <label htmlFor=\"dob\">Date Of Birth  <span className=\"fieldError\">{validation.errors.get(\"dob\")}</span></label>\n                          <input id=\"dob\" type=\"date\" onChange={handleDateChange} value={personalDetails.dob}  />\n                      </div>\n                      <div className=\"column\">\n                          <label htmlFor=\"placeOfBirthTown\">Place Of Birth  <span className=\"fieldError\">{validation.errors.get(\"placeOfBirthTown\")}</span></label>\n                          <input id=\"placeOfBirthTown\" onChange={handleChange} value={personalDetails.placeOfBirthTown}  />\n                      </div>\n                  </div>\n\n                  \n\n                  <div className=\"two-column-row\">\n                      <div className=\"column\">\n                         <button  size=\"small\" color=\"primary\" onClick={handleSaveNow}>Save And Logout</button>\n                      </div>\n                      <div className=\"column\">\n                         <button size=\"small\" color=\"primary\" disabled={buttonState} onClick={handleForward}>Next</button>\n                      </div>\n                  </div>\n\n              </div>\n\n              </div>\n              \n     \n\n    </div>\n\n\n  )\n}\n\n\nexport default PersonalDetails;\n\n\n\n"]},"metadata":{},"sourceType":"module"}